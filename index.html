<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>multibus — Pemesanan Tiket Bus di Sulawesi</title>
  <meta name="description" content="multibus: Platform pemesanan tiket bus multi-PO di Sulawesi. Pilih rute & tanggal, lihat PO, kirim ke WhatsApp 085255877227." />
  <meta name="theme-color" content="#011576" />
  <link rel="icon" type="image/x-icon" href="image/favicon/favicon.ico" />
  <style>
    :root{ --brand:#011576; --ink:#0b1026; --bg:#f6f7fb; --muted:#6b7280; --card:#ffffff; --radius:18px; }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth;-webkit-text-size-adjust:100%}
    body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,'Helvetica Neue',Arial,sans-serif;color:var(--ink);background:var(--bg);-webkit-tap-highlight-color:transparent}
    a{color:inherit;text-decoration:none}
    :focus-visible{outline:3px solid #00C2FF;outline-offset:2px}

    .container{max-width:1100px;margin-inline:auto;padding:20px}
    header{position:sticky;top:0;z-index:20;background:rgba(1,21,118,0.9);backdrop-filter:saturate(140%) blur(6px);box-shadow:0 2px 14px rgba(1,21,118,0.25)}
    header .row{display:flex;align-items:center;gap:16px;padding:10px 20px}
    .logo{display:flex;align-items:center;gap:10px;color:#fff;font-weight:700;letter-spacing:.3px}
    .logo .dot{width:10px;height:10px;background:#02A4E4;border-radius:100%}
    .cta{margin-left:auto;display:flex;gap:10px;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:10px;border:none;background:var(--brand);color:#fff;border-radius:12px;padding:14px 16px;font-weight:700;min-height:48px}

    .hero{position:relative;isolation:isolate;background:radial-gradient(1200px 480px at 70% -10%, rgba(2,164,228,.25), transparent 60%), linear-gradient(180deg, rgba(1,21,118,1) 0%, rgba(1,21,118,.9) 60%, rgba(1,21,118,.85) 100%);color:#fff}
    .hero .container{padding-top:48px;padding-bottom:56px}
    .hero-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:28px;align-items:center}
    .hero h1{font-size:clamp(26px,3vw,40px);line-height:1.15;margin:0 0 10px;font-weight:800}
    .hero p{margin:0 0 20px;color:#e6ebff;max-width:720px;font-size:14px;line-height:1.7}

    .search{background:#fff;color:var(--ink);border-radius:var(--radius);box-shadow:0 20px 40px rgba(0,0,0,.15);padding:20px}
    .search form{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:12px}
    .field{display:flex;flex-direction:column;gap:6px}
    label{font-size:12px;color:var(--muted)}
    select,input[type=date]{width:100%;padding:14px 12px;border-radius:12px;border:1.5px solid #e5e7eb;font-size:15px;min-height:48px}
    .swap{align-self:end}
    .swap button{width:100%;padding:14px;border-radius:12px;border:1.5px dashed #cbd5e1;background:#f8fafc;font-weight:600;min-height:48px}
    .primary{background:var(--brand);color:#fff;border:none;border-radius:12px;padding:14px 16px;font-weight:700;min-height:48px}

    .hero-visual img{width:100%;height:auto;border-radius:20px;box-shadow:0 8px 20px rgba(0,0,0,.25)}

    .section{padding:30px 0}
    .results{display:grid;grid-template-columns:1fr;gap:12px}
    .card{background:var(--card);border-radius:16px;padding:16px;border:1px solid #eaecf0;display:grid;grid-template-columns:auto 1.2fr .8fr auto;gap:14px;align-items:center}
    .card .title{font-weight:800}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:10px 12px;border-radius:999px;background:#f1f5f9;color:#0f172a;font-size:14px;min-height:40px;border:0;cursor:pointer}
    .money{font-weight:900;font-size:22px;color:var(--brand)}
    .thumb{width:110px;height:68px;object-fit:cover;border-radius:12px;border:1px solid #e5e7eb;background:#f8fafc}

    footer{background:#0b1026;color:#cbd5e1}
    footer .container{padding:26px 20px}

    @media (max-width:1024px){.hero-grid{grid-template-columns:1fr;gap:18px}}
    @media (max-width:920px){.search form{grid-template-columns:1fr}.cta{display:none}}
    @media (max-width:700px){.container{padding:14px}.btn{width:100%}.card{grid-template-columns:1fr;align-items:start}}
  </style>
</head>
<body>
  <header>
    <div class="row container">
      <div class="logo" aria-label="multibus logo">
        <span class="dot" aria-hidden="true"></span>
        <span>multibus</span>
      </div>
      <nav class="cta">
        <a href="carter-multibus.html" class="btn">Layanan Carter Bus</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container hero-grid">
      <div>
        <h1>Pemesanan Tiket Bus <br> di Sulawesi</h1>
        <p>Pilih rute & tanggal keberangkatan, lalu lihat daftar mitra PO lengkap dengan jam keberangkatan masing-masing. Semua pesanan dapat langsung dikirim ke WhatsApp admin.</p>
        <div id="searchBox" class="search">
          <form id="searchForm">
            <div class="field">
              <label for="from">Dari</label>
              <select id="from" required>
                <option value="" selected disabled>Pilih kota asal</option>
                <option>Pinrang</option>
                <option>Parepare</option>
                <option>Bone</option>
                <option>Sengkang</option>
                <option>Bulukumba</option>
                <option>Makassar</option>
              </select>
            </div>
            <div class="field">
              <label for="to">Ke</label>
              <select id="to" required>
                <option value="" selected disabled>Pilih kota tujuan</option>
                <option>Makassar</option>
                <option>Pinrang</option>
                <option>Parepare</option>
                <option>Bone</option>
                <option>Sengkang</option>
                <option>Bulukumba</option>
              </select>
            </div>
            <div class="field">
              <label for="date">Tanggal Berangkat</label>
              <input id="date" type="date" required min="" />
            </div>
            <div class="swap">
              <button type="button" id="swapBtn" title="Tukar asal & tujuan">⇅ Tukar</button>
            </div>
            <button class="primary" type="submit">Cari Bus</button>
          </form>
        </div>
      </div>
      <div class="hero-visual" aria-hidden="true">
        <img src="image/hiace_sulawesi.webp" alt="Cover Multibus" loading="lazy">
      </div>
    </div>
  </section>

  <section id="hasil" class="section">
    <div class="container">
      <h2 style="margin:0 0 8px">PO Tersedia</h2>
      <p id="resultMeta" style="margin:0 0 16px;color:var(--muted)">Masukkan rute & tanggal, lalu klik <b>Cari Bus</b>.</p>
      <div id="cards" class="results"></div>
    </div>
  </section>

  <footer>
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;row-gap:10px">
      <div style="display:flex;align-items:center;gap:12px">
        <img src="image/footer.png" alt="Logo Multibus" style="max-height:40px">
        <div>
          <div style="font-weight:800">multibus</div>
          <div>Pesan tiket bus multi-PO untuk rute di Sulawesi.</div>
        </div>
      </div>
      <div>© 2025 MultiBus. All rights reserved.</div>
    </div>
  </footer>

  <script>
  const PO_LIST = [
    { id:"cb", name:"PO Cahaya Bone", seats:8, type:"HiAce / Minibus", base:135000, times:["09:00","16:00"], imgs:["image/assets/unit/hiace-putih.png","images/cahaya-bone/2.jpg"], routes:["Pinrang-Makassar","Makassar-Pinrang","Parepare-Makassar","Makassar-Parepare","Bone-Makassar","Makassar-Bone","Sengkang-Makassar","Makassar-Sengkang","Bulukumba-Makassar","Makassar-Bulukumba"] },
    { id:"yt", name:"PO Yunaka Trans", seats:5, type:"Innova / Avanza", base:136000, times:["08:00","19:00"], imgs:["image/assets/unit/innova-hitam.png","images/yunaka-trans/2.jpg"], routes:["Pinrang-Makassar","Makassar-Pinrang","Makassar-Parepare","Parepare-Makassar"] }
  ];

  const PRICE_MULT = {
    "Pinrang-Makassar":1.00, "Makassar-Pinrang":1.00,
    "Parepare-Makassar":1.00, "Makassar-Parepare":1.00,
    "Bone-Makassar":1.00, "Makassar-Bone":1.00,
    "Sengkang-Makassar":140000/135000, "Makassar-Sengkang":140000/135000,
    "Bulukumba-Makassar":1.00, "Makassar-Bulukumba":1.00
  };

  function rupiah(n){ return new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',maximumFractionDigits:0}).format(n); }
  function q(sel){ return document.querySelector(sel); }
  function el(type, cls){ const e=document.createElement(type); if(cls) e.className=cls; return e; }

  function updateOptions(){
    const fromSel=q('#from');
    const toSel=q('#to');
    const fromVal=fromSel.value;
    const toVal=toSel.value;
    Array.from(fromSel.options).forEach(opt=>{ if(!opt.value) return; opt.disabled=(opt.value===toVal); });
    Array.from(toSel.options).forEach(opt=>{ if(!opt.value) return; opt.disabled=(opt.value===fromVal); });
    if(fromVal && fromVal===toVal){ toSel.value=''; }
  }

  q('#swapBtn').addEventListener('click', ()=>{
    const a=q('#from'); const b=q('#to');
    const temp=a.value; a.value=b.value; b.value=temp;
    updateOptions();
  });

  function isoLocalDate(d){
    const y=d.getFullYear();
    const m=String(d.getMonth()+1).padStart(2,'0');
    const day=String(d.getDate()).padStart(2,'0');
    return `${y}-${m}-${day}`;
  }

  const today = new Date();
  const dateInput = q('#date');
  const todayStr = isoLocalDate(today);
  dateInput.min = todayStr;
  if(!dateInput.value) dateInput.value = todayStr;

  q('#from').addEventListener('change', updateOptions);
  q('#to').addEventListener('change', updateOptions);

  q('#searchForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    const from = q('#from').value; const to = q('#to').value; const date = q('#date').value;
    if(!from || !to || !date) return;
    if(from === to){ alert('Kota asal dan tujuan tidak boleh sama.'); return; }

    const key = `${from}-${to}`;
    const mult = PRICE_MULT[key] ?? 1;

    q('#resultMeta').innerHTML = `Hasil untuk <b>${from} → ${to}</b> tanggal <b>${formatDateID(date)}</b>. Jam keberangkatan sesuai masing-masing PO.`;

    const list = PO_LIST
      .filter(po => !po.routes || po.routes.length===0 || po.routes.includes(key))
      .map(po => {
        const price = Math.round(po.base * mult);
        return { ...po, price, times: po.times.map(t => ({ time:t })) };
      });

    renderCards(list, {from,to,date});
    window.location.hash = '#hasil';
  });

  function renderCards(items, ctx){
    const wrap = q('#cards');
    wrap.innerHTML = '';
    if(!items.length){ wrap.innerHTML = '<div style="padding:14px;border:1px dashed #cbd5e1;border-radius:12px;background:#f8fafc">Tidak ada PO tersedia untuk rute ini.</div>'; return; }
    items.forEach(po =>{
      const card = el('div','card');

      const img = el('img','thumb');
      const src = (po.imgs && po.imgs[0]) || '';
      if(src){ img.src = src; img.alt = po.name; } else { img.style.display='none'; }

      const left = el('div');
      left.innerHTML = `<div class="title">${po.name}</div>\n        <div style="color:var(--muted);font-size:14px">${po.type} • ${po.seats} seat</div>`;

      const mid = el('div');
      const times = el('div'); times.style.display='flex'; times.style.flexWrap='wrap'; times.style.gap='8px';
      po.times.forEach((s)=>{
        const chip = el('button','chip');
        chip.type='button'; chip.textContent = `${s.time}`;
        chip.onclick = ()=> selectAndSend(po, s.time, ctx);
        times.appendChild(chip);
      });
      mid.append(times);

      const right = el('div');
      right.innerHTML = `<div class="money">${rupiah(po.price)}</div>`;
      const btn = el('button','btn'); btn.textContent='Kirim ke WhatsApp';
      btn.onclick = ()=> selectAndSend(po, po.times[0].time, ctx);
      right.append(btn);

      card.append(img, left, mid, right);
      wrap.append(card);
    });
  }

  function selectAndSend(po, time, ctx){
    const msg = `Halo Admin multibus,\n\nSaya ingin pesan tiket:\n• Rute: ${ctx.from} → ${ctx.to}\n• Tanggal: ${formatDateID(ctx.date)}\n• Jam: ${time}\n• PO: ${po.name} (${po.type})\n• Harga: ${rupiah(po.price)}\n\nTolong bantu proses ya. Terima kasih.`;
    const phone = '6285255877227';
    const wa = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
    window.open(wa,'_blank');
  }

  function formatDateID(iso){
    const d = new Date(iso + 'T00:00:00');
    return d.toLocaleDateString('id-ID',{ weekday:'long', day:'2-digit', month:'long', year:'numeric'});
  }
  </script>
</body>
</html>
